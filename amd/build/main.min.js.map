{"version":3,"sources":["../src/main.js"],"names":["define","$","init","upload","bind","uploadFile","file_data","prop","form_data","FormData","append","ajax","url","M","cfg","sesskey","dataType","cache","contentType","processData","data","type","success","response","textarea","obj","parseJSON","file","filename","val","click"],"mappings":"AAAAA,OAAM,wBACF,CAAC,QAAD,CADE,CAEF,SAASC,CAAT,CAAY,CAEZ,MAAO,CACHC,IAAI,CAAE,cAASC,CAAT,CAAiB,CACnBA,CAAM,CAAGF,CAAC,CAACE,CAAD,CAAV,CACAA,CAAM,CAACC,IAAP,CAAY,OAAZ,CAAqB,KAAKC,UAAL,CAAgBF,CAAhB,CAArB,CACH,CAJE,CAMHE,UAAU,CAAE,qBAAY,CACpB,GAAIC,CAAAA,CAAS,CAAGL,CAAC,CAAC,WAAD,CAAD,CAAeM,IAAf,CAAoB,OAApB,EAA6B,CAA7B,CAAhB,CACA,GAAI,CAACD,CAAL,CAAgB,CAAE,MAAS,CAC3B,GAAIE,CAAAA,CAAS,CAAG,GAAIC,CAAAA,QAApB,CACAD,CAAS,CAACE,MAAV,CAAiB,MAAjB,CAAyBJ,CAAzB,EACAL,CAAC,CAACU,IAAF,CAAO,CACHC,GAAG,CAAE,qDAAuDC,CAAC,CAACC,GAAF,CAAMC,OAD/D,CAEHC,QAAQ,CAAE,MAFP,CAGHC,KAAK,GAHF,CAIHC,WAAW,GAJR,CAKHC,WAAW,GALR,CAMHC,IAAI,CAAEZ,CANH,CAOHa,IAAI,CAAE,MAPH,CAQHC,OAAO,CAAE,iBAASC,CAAT,CAAkB,IACnBC,CAAAA,CAAQ,CAAGvB,CAAC,CAAC,oCAAD,CADO,CAEnBwB,CAAG,CAAGxB,CAAC,CAACyB,SAAF,CAAaH,CAAb,CAFa,CAGnBI,CAAI,CAAG,8DAA2DF,CAAG,CAACb,GAA/D,CACV,sDADU,CAC4Ca,CAAG,CAACG,QADhD,CAC2D,UAJ/C,CAKvBJ,CAAQ,CAACK,GAAT,CAAaF,CAAb,EACA1B,CAAC,CAAC,WAAD,CAAD,CAAe4B,GAAf,CAAmB,EAAnB,EACA5B,CAAC,CAAC,gCAAD,CAAD,CAAkC6B,KAAlC,EACH,CAhBE,CAAP,CAkBD,CA7BA,CA+BV,CAnCK,CAAN","sourcesContent":["define(\n    ['jquery'],\n    function($) {\n\n    return {\n        init: function(upload) {\n            upload = $(upload);\n            upload.bind('click', this.uploadFile(upload));\n        },\n\n        uploadFile: function () {\n            var file_data = $('#chatfile').prop('files')[0];\n            if (!file_data) { return; }\n            var form_data = new FormData();\n            form_data.append('file', file_data);\n            $.ajax({\n                url: 'http://localhost/local/chatfiles/ajax.php?sesskey=' + M.cfg.sesskey,\n                dataType: 'text',\n                cache: false,\n                contentType: false,\n                processData: false,\n                data: form_data,\n                type: 'post',\n                success: function(response){\n                    var textarea = $('[data-region=\"send-message-txt\"]');\n                    var obj = $.parseJSON( response );\n                    var file = '<p class=\"text-success font-italic\"><a class=\"\" href=\"' + obj.url +\n                     '\"><i class=\"fa fa-file-o fa-2x pr-2 d-block\"></i>' + obj.filename + '</a></p>';\n                    textarea.val(file);\n                    $('#chatfile').val(\"\");\n                    $('[data-action=\"send-message\"]').click();\n                }\n             });\n          },\n    };\n});\n"],"file":"main.min.js"}