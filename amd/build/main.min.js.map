{"version":3,"sources":["../src/main.js"],"names":["define","$","init","upload","console","log","bind","uploadFile","file_data","prop","form_data","FormData","append","jQuery","ajax","url","M","cfg","sesskey","dataType","cache","contentType","processData","data","type","success","response","alert","textarea","obj","parseJSON","file","filename","newtext","val","click"],"mappings":"AAAAA,OAAM,wBACF,CAAC,QAAD,CAAW,WAAX,CAAwB,mBAAxB,CADE,CAEF,SAASC,CAAT,CAAgC,CAEhC,MAAO,CACHC,IAAI,CAAE,cAASC,CAAT,CAAiB,CACnBA,CAAM,CAAGF,CAAC,CAACE,CAAD,CAAV,CACAC,OAAO,CAACC,GAAR,CAAYF,CAAZ,EACAA,CAAM,CAACG,IAAP,CAAY,OAAZ,CAAqB,KAAKC,UAAL,CAAgBJ,CAAhB,CAArB,CAEH,CANE,CAQHI,UAAU,CAAE,qBAAa,CACrB,GAAIC,CAAAA,CAAS,CAAGP,CAAC,CAAC,WAAD,CAAD,CAAeQ,IAAf,CAAoB,OAApB,EAA6B,CAA7B,CAAhB,CACA,GAAI,CAACD,CAAL,CAAgB,CAAE,MAAS,CAC3B,GAAIE,CAAAA,CAAS,CAAG,GAAIC,CAAAA,QAApB,CACAD,CAAS,CAACE,MAAV,CAAiB,MAAjB,CAAyBJ,CAAzB,EACAK,MAAM,CAACC,IAAP,CAAY,CACRC,GAAG,CAAE,qDAAuDC,CAAC,CAACC,GAAF,CAAMC,OAD1D,CAERC,QAAQ,CAAE,MAFF,CAGRC,KAAK,GAHG,CAIRC,WAAW,GAJH,CAKRC,WAAW,GALH,CAMRC,IAAI,CAAEb,CANE,CAORc,IAAI,CAAE,MAPE,CAQRC,OAAO,CAAE,iBAASC,CAAT,CAAkB,CACvBC,KAAK,CAACD,CAAD,CAAL,CACAE,QAAQ,CAAGf,MAAM,CAAC,oCAAD,CAAjB,CACA,GAAIgB,CAAAA,CAAG,CAAGhB,MAAM,CAACiB,SAAP,CAAkBJ,CAAlB,CAAV,CACAtB,OAAO,CAACC,GAAR,CAAYwB,CAAG,CAACd,GAAhB,EACAgB,IAAI,CAAG,8DAA2DF,CAAG,CAACd,GAA/D,CAAqE,sDAArE,CAA2Hc,CAAG,CAACG,QAA/H,CAA0I,UAAjJ,CACAC,OAAO,CAAGL,QAAQ,CAACM,GAAT,CAAaH,IAAb,CAAV,CACA9B,CAAC,CAAC,WAAD,CAAD,CAAeiC,GAAf,CAAmB,EAAnB,EACAjC,CAAC,CAAC,gCAAD,CAAD,CAAkCkC,KAAlC,EACH,CAjBO,CAAZ,CAoBD,CAjCA,CAoCV,CAxCK,CAAN","sourcesContent":["define(\r\n    ['jquery', 'core/ajax', 'core/notification'],\r\n    function($, AJAX, NOTIFICATION) {\r\n\r\n    return {\r\n        init: function(upload) {\r\n            upload = $(upload);\r\n            console.log(upload);\r\n            upload.bind('click', this.uploadFile(upload));\r\n    \r\n        },  \r\n\r\n        uploadFile: function (e) {\r\n            var file_data = $('#chatfile').prop('files')[0];  \r\n            if (!file_data) {\treturn; }\r\n            var form_data = new FormData();                  \r\n            form_data.append('file', file_data);              \r\n            jQuery.ajax({\r\n                url: 'http://localhost/local/chatfiles/ajax.php?sesskey=' + M.cfg.sesskey, // <-- point to server-side PHP script \r\n                dataType: 'text',  // <-- what to expect back from the PHP script, if anything\r\n                cache: false,\r\n                contentType: false,\r\n                processData: false,\r\n                data: form_data,                         \r\n                type: 'post',\r\n                success: function(response){\r\n                    alert(response);\r\n                    textarea = jQuery('[data-region=\"send-message-txt\"]');\r\n                    var obj = jQuery.parseJSON( response );\r\n                    console.log(obj.url);\r\n                    file = '<p class=\"text-success font-italic\"><a class=\"\" href=\"' + obj.url + '\"><i class=\"fa fa-file-o fa-2x pr-2 d-block\"></i>' + obj.filename + '</a></p>';\r\n                    newtext = textarea.val(file);\r\n                    $('#chatfile').val(\"\");\r\n                    $('[data-action=\"send-message\"]').click();\r\n                }\r\n             });\r\n            //do some stuff\r\n          },\r\n   \r\n    };\r\n});\r\n"],"file":"main.min.js"}