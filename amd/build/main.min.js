define ("local_chatfiles/main",["jquery","core/ajax","core/notification"],function(a){return{init:function init(b){b=a(b);console.log(b);b.bind("click",this.uploadFile(b))},uploadFile:function uploadFile(){var b=a("#chatfile").prop("files")[0];if(!b){return}var c=new FormData;c.append("file",b);jQuery.ajax({url:"http://localhost/local/chatfiles/ajax.php?sesskey="+M.cfg.sesskey,dataType:"text",cache:!1,contentType:!1,processData:!1,data:c,type:"post",success:function success(b){alert(b);textarea=jQuery("[data-region=\"send-message-txt\"]");var c=jQuery.parseJSON(b);console.log(c.url);file="<p class=\"text-success font-italic\"><a class=\"\" href=\""+c.url+"\"><i class=\"fa fa-file-o fa-2x pr-2 d-block\"></i>"+c.filename+"</a></p>";newtext=textarea.val(file);a("#chatfile").val("");a("[data-action=\"send-message\"]").click()}})}}});
//# sourceMappingURL=main.min.js.map
