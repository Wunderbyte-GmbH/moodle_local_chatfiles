define ("local_chatfiles/main",["jquery"],function(a){return{init:function init(b){b=a(b);b.bind("click",this.uploadFile(b))},uploadFile:function uploadFile(){var b=a("#chatfile").prop("files")[0];if(!b){return}var c=new FormData;c.append("file",b);var d=a("[data-region=\"view-conversation\"] [data-region=\"header-content\"] strong.text-truncate").text();c.append("name",d);a.ajax({url:M.cfg.wwwroot+"/local/chatfiles/ajax.php?sesskey="+M.cfg.sesskey,dataType:"text",cache:!1,contentType:!1,processData:!1,data:c,type:"post",success:function success(b){var c=a(".drawer [data-region=\"send-message-txt\"]"),d=a.parseJSON(b);console.log(d);if(d.error){alert(d.error);a("#chatfile").val("");return}var e="<p class=\"text-success font-italic\"><a class=\"\" href=\""+d.url+"\"><i class=\"fa fa-file-o fa-2x pr-2 d-block\"></i>"+d.filename+"</a></p>";c.val(e);a("#chatfile").val("");a("[data-action=\"send-message\"]").click()}})}}});
//# sourceMappingURL=main.min.js.map
